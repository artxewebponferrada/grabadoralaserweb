---
// src/pages/comparador/index.astro
import Layout from '../../layouts/Layout.astro';
import brandsData from '../../data/brands.json';
import productsData from '../../data/products.json';

// ==========================================
// 1. SELECCI√ìN MANUAL: TOP 3 MARCAS (FABRICANTES)
// ==========================================
const brand1 = brandsData.brands.find(b => b.id === 'xtool');
const brand2 = brandsData.brands.find(b => b.id === 'sculpfun');
const brand3 = brandsData.brands.find(b => b.id === 'ortur');

// ==========================================
// 2. SELECCI√ìN MANUAL: TOP 3 MODELOS (M√ÅQUINAS)
// ==========================================
// Elegimos las 3 m√°quinas m√°s representativas para comparar cara a cara
const modelPro = productsData.products.find(p => p.id === 'xtool-s1-40w');
const modelMid = productsData.products.find(p => p.id === 'ortur-laser-master-3-20w');
const modelBudget = productsData.products.find(p => p.id === 'sculpfun-s30-pro');

// ==========================================
// 3. SELECCI√ìN MANUAL: RESTO DEL TOP 10 MARCAS
// ==========================================
const rankedBrands = [
  { data: brandsData.brands.find(b => b.id === 'atomstack'), rank: 4, tag: "Potencia Bruta" },
  { data: brandsData.brands.find(b => b.id === 'ikier'), rank: 5, tag: "Tecnolog√≠a Punta" },
  { data: brandsData.brands.find(b => b.id === 'commarker'), rank: 6, tag: "Rey del Metal (Fibra)" },
  { data: brandsData.brands.find(b => b.id === 'longer'), rank: 7, tag: "Pantalla T√°ctil" },
  { data: brandsData.brands.find(b => b.id === 'mecpow'), rank: 8, tag: "Seguridad/Cerrada" },
  { data: brandsData.brands.find(b => b.id === 'atezr'), rank: 9, tag: "Gran Formato" },
  { data: brandsData.brands.find(b => b.id === 'twotrees'), rank: 10, tag: "Econ√≥mica DIY" },
];

---

<Layout
  title="Comparador Definitivo de Grabadoras L√°ser 2025: Marcas y Modelos"
  description="An√°lisis experto: Top 3 Marcas, Comparativa t√©cnica de los 3 mejores modelos del a√±o y gu√≠a de compra honesta."
>
  <main class="bg-slate-50 min-h-screen font-sans text-slate-800">
    
    {/* HERO: AUTORIDAD */}
    <header class="bg-[#0f172a] text-white pt-20 pb-28 px-4 relative overflow-hidden border-b-4 border-blue-600">
      <div class="absolute inset-0 opacity-10 bg-[url('/grid-pattern.svg')]"></div>
      <div class="max-w-4xl mx-auto text-center relative z-10">
        <span class="inline-block py-1 px-3 rounded bg-blue-600 text-white text-xs font-bold uppercase tracking-widest mb-6">
          Edici√≥n 2025 ‚Ä¢ Testado en Taller
        </span>
        <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6 leading-tight">
          La Comparativa Definitiva de <br class="hidden md:block" />
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Grabadoras L√°ser</span>
        </h1>
        <p class="text-xl text-slate-300 mb-0 font-light">
          He separado el grano de la paja. Aqu√≠ tienes el <strong>Top 3 de Marcas</strong> y, lo m√°s importante, el <strong>Top 3 de M√°quinas</strong> espec√≠ficas que deber√≠as comprar seg√∫n tu presupuesto.
        </p>
      </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16 relative z-20 space-y-24 mb-24">

      {/* =========================================================
          SECCI√ìN 1: TOP 3 MARCAS (COMPA√ë√çAS)
          Qui√©n fabrica mejor, qui√©n da mejor soporte.
         ========================================================= */}
      <section>
        <div class="flex items-center gap-4 mb-8">
          <div class="h-10 w-2 bg-blue-600 rounded-full"></div>
          <h2 class="text-3xl font-bold text-slate-900">1. Top 3 Marcas (Fabricantes)</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          
          {/* MARCA #1 */}
          <div class="bg-white rounded-2xl shadow-lg border-2 border-blue-500 p-6 relative overflow-hidden group">
            <div class="absolute top-0 right-0 bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">GANADOR</div>
            <div class="h-16 flex items-center justify-center mb-4">
              <img src={brand1.logo} alt={brand1.name} class="max-h-full object-contain" />
            </div>
            <h3 class="text-xl font-bold text-center mb-2">{brand1.name}</h3>
            <p class="text-sm text-slate-600 text-center mb-4 min-h-[60px]">
              El "Apple" del l√°ser. Ecosistema cerrado, software propio incre√≠ble y seguridad total. Si quieres producir sin problemas t√©cnicos, es esta.
            </p>
            <div class="flex justify-center">
              <a href={`/marcas/${brand1.slug}`} class="text-blue-600 font-bold text-sm hover:underline">Ver An√°lisis Marca &rarr;</a>
            </div>
          </div>

          {/* MARCA #2 */}
          <div class="bg-white rounded-2xl shadow-lg border border-slate-200 p-6 relative overflow-hidden group hover:border-emerald-400 transition-colors">
            <div class="absolute top-0 right-0 bg-emerald-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">CALIDAD/PRECIO</div>
            <div class="h-16 flex items-center justify-center mb-4">
              <img src={brand2.logo} alt={brand2.name} class="max-h-full object-contain mix-blend-multiply" />
            </div>
            <h3 class="text-xl font-bold text-center mb-2">{brand2.name}</h3>
            <p class="text-sm text-slate-600 text-center mb-4 min-h-[60px]">
              La opci√≥n inteligente. No gastas en marketing ni carcasas bonitas, pagas por una √≥ptica excelente y un chasis funcional. Ideal para empezar.
            </p>
            <div class="flex justify-center">
              <a href={`/marcas/${brand2.slug}`} class="text-emerald-600 font-bold text-sm hover:underline">Ver An√°lisis Marca &rarr;</a>
            </div>
          </div>

          {/* MARCA #3 */}
          <div class="bg-white rounded-2xl shadow-lg border border-slate-200 p-6 relative overflow-hidden group hover:border-slate-400 transition-colors">
            <div class="absolute top-0 right-0 bg-slate-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">FIABILIDAD</div>
            <div class="h-16 flex items-center justify-center mb-4">
              <img src={brand3.logo} alt={brand3.name} class="max-h-full object-contain mix-blend-multiply" />
            </div>
            <h3 class="text-xl font-bold text-center mb-2">{brand3.name}</h3>
            <p class="text-sm text-slate-600 text-center mb-4 min-h-[60px]">
              Los pioneros. Mec√°nica robusta, velocidades altas y compatibilidad total. Es el punto medio perfecto entre hobby y profesional.
            </p>
            <div class="flex justify-center">
              <a href={`/marcas/${brand3.slug}`} class="text-slate-600 font-bold text-sm hover:underline">Ver An√°lisis Marca &rarr;</a>
            </div>
          </div>

        </div>
      </section>

      {/* =========================================================
          SECCI√ìN 2: BATALLA DE MODELOS (M√ÅQUINAS ESPEC√çFICAS)
          Comparativa t√©cnica dura de los 3 mejores productos.
         ========================================================= */}
      <section>
        <div class="flex flex-col md:flex-row justify-between items-end mb-8">
          <div class="flex items-center gap-4">
            <div class="h-10 w-2 bg-emerald-500 rounded-full"></div>
            <div>
              <h2 class="text-3xl font-bold text-slate-900">2. Top 3 Modelos: Cara a Cara</h2>
              <p class="text-slate-600 mt-2">Si tienes el dinero, compra una de estas tres. No fallar√°s.</p>
            </div>
          </div>
        </div>

        <div class="overflow-x-auto bg-white rounded-3xl shadow-xl border border-slate-200">
          <table class="w-full min-w-[800px] text-left border-collapse">
            <thead>
              <tr>
                <th class="p-6 border-b border-r border-slate-100 bg-slate-50 w-1/4"></th>
                
                {/* MODELO 1 (PRO) */}
                <th class="p-6 border-b border-r border-slate-100 w-1/4 align-top">
                  <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 text-[10px] font-bold uppercase rounded mb-2">Profesional</span>
                  <img src={modelPro.mainImage} class="w-full h-32 object-contain mb-3" loading="lazy" />
                  <h3 class="text-lg font-bold text-slate-900 leading-tight mb-1">{modelPro.title}</h3>
                  <div class="text-xl font-black text-blue-600">{modelPro.price}‚Ç¨</div>
                </th>

                {/* MODELO 2 (MID) */}
                <th class="p-6 border-b border-r border-slate-100 w-1/4 align-top relative bg-yellow-50/30">
                  <div class="absolute top-0 left-0 w-full h-1 bg-yellow-400"></div>
                  <span class="inline-block px-2 py-1 bg-yellow-100 text-yellow-800 text-[10px] font-bold uppercase rounded mb-2">Mejor Balance</span>
                  <img src={modelMid.mainImage} class="w-full h-32 object-contain mb-3 mix-blend-multiply" loading="lazy" />
                  <h3 class="text-lg font-bold text-slate-900 leading-tight mb-1">{modelMid.title}</h3>
                  <div class="text-xl font-black text-yellow-600">{modelMid.price}‚Ç¨</div>
                </th>

                {/* MODELO 3 (BUDGET) */}
                <th class="p-6 border-b border-slate-100 w-1/4 align-top">
                  <span class="inline-block px-2 py-1 bg-green-100 text-green-800 text-[10px] font-bold uppercase rounded mb-2">Econ√≥mica</span>
                  <img src={modelBudget.mainImage} class="w-full h-32 object-contain mb-3 mix-blend-multiply" loading="lazy" />
                  <h3 class="text-lg font-bold text-slate-900 leading-tight mb-1">{modelBudget.title}</h3>
                  <div class="text-xl font-black text-green-600">{modelBudget.price}‚Ç¨</div>
                </th>
              </tr>
            </thead>
            <tbody class="text-sm text-slate-600">
              
              {/* Fila: Potencia */}
              <tr class="hover:bg-slate-50">
                <td class="p-4 font-bold text-slate-900 border-b border-r border-slate-100">Potencia √ìptica</td>
                <td class="p-4 border-b border-r border-slate-100 font-bold text-blue-700">40W (Corte Profundo)</td>
                <td class="p-4 border-b border-r border-slate-100 font-bold text-slate-900">20W (Est√°ndar Pro)</td>
                <td class="p-4 border-b border-slate-100 text-slate-700">10W (Grabado Fino)</td>
              </tr>

              {/* Fila: Velocidad */}
              <tr class="hover:bg-slate-50">
                <td class="p-4 font-bold text-slate-900 border-b border-r border-slate-100">Velocidad M√°x.</td>
                <td class="p-4 border-b border-r border-slate-100">600 mm/s ‚ö°</td>
                <td class="p-4 border-b border-r border-slate-100">330 mm/s</td>
                <td class="p-4 border-b border-slate-100">83 mm/s</td>
              </tr>

              {/* Fila: Enfoque */}
              <tr class="hover:bg-slate-50">
                <td class="p-4 font-bold text-slate-900 border-b border-r border-slate-100">Sistema de Enfoque</td>
                <td class="p-4 border-b border-r border-slate-100 text-green-600 font-semibold">Autom√°tico Motorizado</td>
                <td class="p-4 border-b border-r border-slate-100">Manual (Palanca r√°pida)</td>
                <td class="p-4 border-b border-slate-100">Manual (Columna fija)</td>
              </tr>

              {/* Fila: Seguridad */}
              <tr class="hover:bg-slate-50">
                <td class="p-4 font-bold text-slate-900 border-b border-r border-slate-100">Seguridad</td>
                <td class="p-4 border-b border-r border-slate-100 font-semibold">Clase 1 (Cerrada + Sensores)</td>
                <td class="p-4 border-b border-r border-slate-100">Clase 4 (Abierta, necesita gafas)</td>
                <td class="p-4 border-b border-slate-100">Clase 4 (B√°sica)</td>
              </tr>

              {/* Fila: Veredicto */}
              <tr>
                <td class="p-4 font-bold text-slate-900 border-r border-slate-100">¬øPara qui√©n?</td>
                <td class="p-4 border-r border-slate-100 italic">"Para quien quiere montar un negocio y producir desde el d√≠a 1."</td>
                <td class="p-4 border-r border-slate-100 italic">"El equilibrio perfecto. R√°pida, fiable y potente sin arruinarte."</td>
                <td class="p-4 italic">"La mejor entrada al hobby. Barata, corta bien y hay mil repuestos."</td>
              </tr>

              {/* Fila: Botones */}
              <tr class="bg-slate-50">
                <td class="p-4 border-r border-slate-100"></td>
                <td class="p-4 border-r border-slate-100">
                  <a href={`/productos/${modelPro.slug}`} class="block w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold text-center rounded transition-colors">Ver An√°lisis</a>
                </td>
                <td class="p-4 border-r border-slate-100">
                  <a href={`/productos/${modelMid.slug}`} class="block w-full py-2 bg-slate-800 hover:bg-slate-900 text-white font-bold text-center rounded transition-colors">Ver An√°lisis</a>
                </td>
                <td class="p-4">
                  <a href={`/productos/${modelBudget.slug}`} class="block w-full py-2 bg-white border border-slate-300 hover:bg-green-50 text-green-700 font-bold text-center rounded transition-colors">Ver An√°lisis</a>
                </td>
              </tr>

            </tbody>
          </table>
        </div>
      </section>

      {/* =========================================================
          SECCI√ìN 3: ESPECIALISTAS (CASOS DE USO)
          Para usuarios que buscan algo muy concreto.
         ========================================================= */}
      <section>
        <div class="flex items-center gap-4 mb-8">
          <div class="h-10 w-2 bg-purple-600 rounded-full"></div>
          <h2 class="text-3xl font-bold text-slate-900">3. M√°quinas para Usos Especiales</h2>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
          {/* TARJETA ESPECIALISTA: METAL */}
          <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-8 text-white flex flex-row items-center gap-6 shadow-lg">
             <div class="w-1/3">
                <div class="w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mb-4 text-3xl">üíé</div>
                <h3 class="text-xl font-bold mb-2">Marcaje de Metal y Joyer√≠a</h3>
             </div>
             <div class="w-2/3">
               <p class="text-slate-300 text-sm mb-4">
                 Las m√°quinas de diodo NO sirven para metal desnudo. Necesitas una m√°quina de <strong>Fibra √ìptica</strong>. La mejor opci√≥n accesible es <strong>ComMarker</strong>.
               </p>
               <a href="/marcas/commarker" class="text-blue-300 hover:text-white font-bold text-sm underline underline-offset-4">Ver grabadoras de fibra &rarr;</a>
             </div>
          </div>

          {/* TARJETA ESPECIALISTA: CO2 INDUSTRIAL */}
          <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-2xl p-8 text-white flex flex-row items-center gap-6 shadow-lg">
             <div class="w-1/3">
                <div class="w-16 h-16 bg-blue-700 rounded-full flex items-center justify-center mb-4 text-3xl">üè≠</div>
                <h3 class="text-xl font-bold mb-2">Corte de Acr√≠lico Transparente</h3>
             </div>
             <div class="w-2/3">
               <p class="text-blue-200 text-sm mb-4">
                 El l√°ser azul (diodo) atraviesa el metacrilato transparente sin cortarlo. Necesitas un l√°ser <strong>CO2</strong> como las <strong>OMTech</strong> o la <strong>xTool P2</strong>.
               </p>
               <a href="/marcas/omtech" class="text-white hover:text-blue-200 font-bold text-sm underline underline-offset-4">Ver l√°seres CO2 &rarr;</a>
             </div>
          </div>
        </div>
      </section>

      {/* =========================================================
          SECCI√ìN 4: RANKING DEL RESTO DEL TOP 10 (4-10)
          Listado m√°s compacto para las alternativas.
         ========================================================= */}
      <section>
        <div class="flex items-center gap-4 mb-8">
          <div class="h-10 w-2 bg-slate-400 rounded-full"></div>
          <h2 class="text-3xl font-bold text-slate-900">4. El Resto del Top 10</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {rankedBrands.map((item) => (
            <a href={`/marcas/${item.data.slug}`} class="group bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-500 hover:shadow-md transition-all flex flex-col justify-between h-full">
              <div>
                <div class="flex justify-between items-start mb-4">
                  <span class="text-2xl font-black text-slate-200">#{item.rank}</span>
                  <span class="bg-slate-100 text-slate-600 text-[10px] font-bold px-2 py-1 rounded uppercase">{item.tag}</span>
                </div>
                <div class="h-12 flex items-center justify-start mb-4">
                   <img src={item.data.logo} alt={item.data.name} class="max-h-full object-contain mix-blend-multiply filter grayscale group-hover:grayscale-0 transition-all" />
                </div>
                <h3 class="font-bold text-slate-900 mb-1">{item.data.name}</h3>
                <div class="flex text-yellow-400 text-xs mb-4">{"‚òÖ".repeat(Math.floor(item.data.rating))}</div>
              </div>
              <div class="text-blue-600 text-xs font-bold flex items-center group-hover:translate-x-1 transition-transform">
                Ver An√°lisis <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </div>
            </a>
          ))}
        </div>
      </section>

      {/* =========================================================
          SECCI√ìN 5: GU√çA DE EXPERTO (CONSEJOS FINALES)
          Texto puro para cerrar y dar confianza.
         ========================================================= */}
      <section class="max-w-4xl mx-auto bg-yellow-50 rounded-3xl p-8 md:p-12 border border-yellow-100">
        <h2 class="text-2xl font-bold text-yellow-900 mb-6 flex items-center gap-3">
          <span class="text-3xl">üí°</span> Consejo final antes de sacar la tarjeta
        </h2>
        <div class="prose prose-yellow text-yellow-800">
          <p>
            He visto a mucha gente comprar la m√°quina m√°s barata de Amazon (esas de 150‚Ç¨ sin marca) para acabar frustrados a los 3 meses porque el l√°ser pierde potencia o el software es una pesadilla.
          </p>
          <p><strong>Mi recomendaci√≥n final es simple:</strong></p>
          <ul>
            <li>
              Si valoras tu tiempo y quieres resultados profesionales ya, ve a por <strong>xTool</strong>. Es cara, s√≠, pero funciona.
            </li>
            <li>
              Si te gusta "cacharrea", tienes un presupuesto ajustado y no te importa apretar tornillos o configurar par√°metros, una <strong>Sculpfun</strong> o <strong>Atomstack</strong> te dar√°n la misma calidad de corte por la mitad de precio.
            </li>
          </ul>
          <p class="font-bold mt-4">
            Y por favor, compra siempre GAFAS DE PROTECCI√ìN CERTIFICADAS (OD6+). Tus ojos no tienen repuesto.
          </p>
        </div>
      </section>

    </div>
  </main>
</Layout>
