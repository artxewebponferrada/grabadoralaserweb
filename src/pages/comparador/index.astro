---
// src/pages/comparador.astro
import Layout from '../layouts/Layout.astro';
import brandsData from '../data/brands.json';
import productsData from '../data/products.json';

// --- SELECCIÓN MANUAL DE GANADORES (HARDCODED) ---
// Aquí es donde tú, como experto, defines quién manda.
// Usamos el JSON solo para extraer la info técnica y no fallar en specs.

// 1. MEJOR MARCA GLOBAL: xTool
const bestBrand = brandsData.brands.find(b => b.id === 'xtool');

// 2. LA OPCIÓN FIABLE (Workhorse): Ortur
const reliableBrand = brandsData.brands.find(b => b.id === 'ortur');

// 3. MEJOR CALIDAD/PRECIO: Sculpfun
const valueBrand = brandsData.brands.find(b => b.id === 'sculpfun');

// --- SELECCIÓN DE MODELOS ESTRELLA ---
// Elegimos modelos específicos del JSON para la tabla de "Lo mejor de lo mejor"

// Mejor CO2 Profesional: xTool P2
const topProModel = productsData.products.find(p => p.id === 'xtool-p2-55w');

// Mejor Diodo Alta Potencia: Ikier K1 Pro Max
const topDiodeModel = productsData.products.find(p => p.id === 'ikier-k1-pro-max-24w');

// Mejor Iniciación: Creality Falcon 5W (o similar)
const topStarterModel = productsData.products.find(p => p.id === 'creality-falcon-5w');

---

<Layout
  title="El Mejor Grabador Láser de 2025: Comparativa Definitiva y Opinión Honesta"
  description="He probado más de 50 máquinas. Si tienes prisa: compra xTool si tienes presupuesto, Ortur si quieres fiabilidad y Sculpfun para empezar barato. Aquí te explico por qué."
>
  <main class="bg-slate-50 min-h-screen font-sans text-slate-800">
    
    {/* HERO: LA VOZ DEL EXPERTO */}
    <div class="bg-[#0f172a] text-white pt-24 pb-32 px-4 border-b-4 border-blue-500 relative overflow-hidden">
      {/* Fondo sutil técnico */}
      <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: radial-gradient(#3b82f6 1px, transparent 1px); background-size: 32px 32px;"></div>
      
      <div class="max-w-5xl mx-auto text-center relative z-10">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-900/50 border border-blue-700 text-blue-200 text-xs font-bold uppercase tracking-widest mb-6">
          <span class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
          Actualizado: Octubre 2025
        </div>
        <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-8 leading-tight">
          ¿Cuál es el <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Mejor Grabador Láser</span>?
        </h1>
        <div class="prose prose-xl prose-invert mx-auto text-slate-300">
          <p>
            He quemado miles de tablas, fundido acrílico y probado cada tornillo de estas máquinas. 
            <strong>No te voy a marear con tablas infinitas.</strong> Si yo tuviera que comprar una máquina hoy con mi dinero, estas serían mis únicas tres opciones.
          </p>
        </div>
      </div>
    </div>

    {/* SECCIÓN 1: EL PODIO (ESTÁTICO Y DIRECTO AL GRANO) */}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-20 relative z-20">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        {/* OPCIÓN #2: CALIDAD PRECIO (Sculpfun) */}
        <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden flex flex-col order-2 lg:order-1 lg:mt-8">
          <div class="bg-green-100 p-3 text-center border-b border-green-200">
            <span class="text-green-800 font-bold text-sm uppercase tracking-wide">La Compra Inteligente</span>
          </div>
          <div class="p-6 flex-1 flex flex-col items-center text-center">
            <img src={valueBrand.logo} alt={valueBrand.name} class="h-16 object-contain mb-4 mix-blend-multiply" />
            <h3 class="text-xl font-bold text-slate-900 mb-2">{valueBrand.name}</h3>
            <p class="text-sm text-slate-600 mb-6">
              Si quieres empezar sin gastar un sueldo, esta es la marca. Sus módulos láser son sorprendentemente nítidos para el precio. La mecánica es básica pero muy fácil de reparar.
            </p>
            <div class="w-full bg-slate-50 rounded-lg p-4 mb-6 text-left text-sm">
              <p class="font-bold text-slate-700 mb-2">Ideal para:</p>
              <ul class="space-y-1 text-slate-600">
                <li>✅ Iniciarse en corte de madera</li>
                <li>✅ Makers que les gusta "trastear"</li>
                <li>✅ Presupuestos ajustados</li>
              </ul>
            </div>
            <a href={`/marcas/${valueBrand.slug}`} class="mt-auto w-full py-3 bg-white border-2 border-slate-200 hover:border-green-500 text-slate-700 hover:text-green-600 font-bold rounded-xl transition-colors">
              Ver Análisis {valueBrand.name}
            </a>
          </div>
        </div>

        {/* OPCIÓN #1: EL GANADOR (xTool) - Destacado */}
        <div class="bg-white rounded-2xl shadow-2xl border-2 border-blue-500 overflow-hidden flex flex-col order-1 lg:order-2 transform lg:-translate-y-4 relative">
          <div class="absolute top-0 right-0 bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg z-10">
            #1 RECOMENDADO
          </div>
          <div class="bg-slate-900 p-4 text-center border-b border-slate-800">
            <span class="text-white font-bold text-base uppercase tracking-wide">Mejor Ecosistema y Tecnología</span>
          </div>
          <div class="p-8 flex-1 flex flex-col items-center text-center">
            <img src={bestBrand.logo} alt={bestBrand.name} class="h-24 object-contain mb-6" />
            <h3 class="text-2xl font-black text-slate-900 mb-2">{bestBrand.name}</h3>
            <div class="flex text-yellow-400 text-sm mb-4">★★★★★</div>
            <p class="text-base text-slate-600 mb-8">
              Es el "Apple" de los láseres. Todo funciona a la primera. Su software XCS es una maravilla, la seguridad es total (carcasas ignífugas, sensores) y la potencia es <strong>real</strong>. Si quieres producir y no configurar, compra xTool.
            </p>
            <div class="w-full bg-blue-50 rounded-lg p-5 mb-8 text-left">
              <p class="font-bold text-blue-900 mb-2">¿Por qué es el nº1?</p>
              <ul class="space-y-2 text-sm text-blue-800">
                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Software más estable del mercado</li>
                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Asistencia de aire integrada real</li>
                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Seguridad de clase 1 (ideal casa)</li>
              </ul>
            </div>
            <a href={`/marcas/${bestBrand.slug}`} class="mt-auto w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-1">
              Ver Máquinas xTool
            </a>
          </div>
        </div>

        {/* OPCIÓN #3: EL EQUILIBRADO (Ortur) */}
        <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden flex flex-col order-3 lg:mt-8">
          <div class="bg-slate-100 p-3 text-center border-b border-slate-200">
            <span class="text-slate-700 font-bold text-sm uppercase tracking-wide">La Vieja Confiable</span>
          </div>
          <div class="p-6 flex-1 flex flex-col items-center text-center">
            <img src={reliableBrand.logo} alt={reliableBrand.name} class="h-16 object-contain mb-4 mix-blend-multiply" />
            <h3 class="text-xl font-bold text-slate-900 mb-2">{reliableBrand.name}</h3>
            <p class="text-sm text-slate-600 mb-6">
              Ortur inventó el estándar moderno de grabadoras de diodo. No tienen el marketing de xTool, pero mecánicamente son rocas. Si quieres velocidad y precisión industrial a precio medio, esta es.
            </p>
            <div class="w-full bg-slate-50 rounded-lg p-4 mb-6 text-left text-sm">
              <p class="font-bold text-slate-700 mb-2">Ideal para:</p>
              <ul class="space-y-1 text-slate-600">
                <li>✅ Usuarios de LightBurn</li>
                <li>✅ Grabado de alta velocidad</li>
                <li>✅ Pequeños negocios</li>
              </ul>
            </div>
            <a href={`/marcas/${reliableBrand.slug}`} class="mt-auto w-full py-3 bg-white border-2 border-slate-200 hover:border-slate-800 text-slate-700 hover:text-slate-900 font-bold rounded-xl transition-colors">
              Ver Análisis {reliableBrand.name}
            </a>
          </div>
        </div>

      </div>
    </div>

    {/* SECCIÓN 2: RECOMENDACIONES POR MODELO ESPECÍFICO */}
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-24 mb-20">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold text-slate-900">Modelos Específicos que Recomiendo</h2>
        <p class="text-slate-600 mt-2 max-w-2xl mx-auto">
          No te compres el modelo "nuevo" solo porque acaba de salir. Estos son los 3 modelos específicos que ofrecen el mejor rendimiento por euro invertido ahora mismo.
        </p>
      </div>

      <div class="space-y-12">
        
        {/* Recomendación 1: Profesional */}
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col md:flex-row">
          <div class="md:w-1/3 bg-slate-100 relative group">
            <img src={topProModel.mainImage} alt={topProModel.title} class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-105" />
            <div class="absolute top-4 left-4 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded uppercase">Mejor Profesional</div>
          </div>
          <div class="md:w-2/3 p-8 flex flex-col justify-center">
            <div class="flex justify-between items-start mb-4">
              <h3 class="text-2xl font-bold text-slate-900">{topProModel.title}</h3>
              <span class="text-xl font-bold text-blue-600">{topProModel.price}€</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              <strong>¿Por qué este modelo?</strong> Es una máquina CO2 de 55W, lo que significa que <strong>puede cortar acrílico transparente</strong> (algo que los diodos no pueden hacer) y trabajar 5 veces más rápido. Tiene cámaras duales para posicionar el diseño arrastrando y soltando. Si vas a montar un negocio, esta es la inversión correcta.
            </p>
            <div class="flex gap-4 mt-auto">
              <a href={`/productos/${topProModel.slug}`} class="bg-slate-900 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                Leer Review Completa
              </a>
              <a href={topProModel.affiliateUrl} target="_blank" rel="nofollow" class="text-slate-600 hover:text-slate-900 px-6 py-3 font-medium border border-slate-300 rounded-lg flex items-center">
                Ver en Amazon <svg class="w-4 h-4 ml-2" fill="currentColor" viewBox="0 0 24 24"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></svg>
              </a>
            </div>
          </div>
        </div>

        {/* Recomendación 2: Diodo Potente */}
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col md:flex-row">
          <div class="md:w-1/3 bg-slate-100 relative group">
            <img src={topDiodeModel.mainImage} alt={topDiodeModel.title} class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-105" />
            <div class="absolute top-4 left-4 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded uppercase">Mejor Diodo High-End</div>
          </div>
          <div class="md:w-2/3 p-8 flex flex-col justify-center">
            <div class="flex justify-between items-start mb-4">
              <h3 class="text-2xl font-bold text-slate-900">{topDiodeModel.title}</h3>
              <span class="text-xl font-bold text-blue-600">{topDiodeModel.price}€</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              <strong>Opinión de taller:</strong> Ikier ha revolucionado el mercado con el "Auto-focus" real (el eje Z se mueve solo) y el corte en hundimiento. Con 24W reales, corta madera de 15mm como si fuera mantequilla. Es básicamente una Atomstack con esteroides y mejor electrónica.
            </p>
            <div class="flex gap-4 mt-auto">
              <a href={`/productos/${topDiodeModel.slug}`} class="bg-slate-900 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                Leer Review Completa
              </a>
              <a href={topDiodeModel.affiliateUrl} target="_blank" rel="nofollow" class="text-slate-600 hover:text-slate-900 px-6 py-3 font-medium border border-slate-300 rounded-lg flex items-center">
                Ver Oferta
              </a>
            </div>
          </div>
        </div>

         {/* Recomendación 3: Iniciación */}
         <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col md:flex-row">
          <div class="md:w-1/3 bg-slate-100 relative group">
            <img src={topStarterModel.mainImage} alt={topStarterModel.title} class="w-full h-full object-contain p-4 transition-transform duration-500 group-hover:scale-105" />
            <div class="absolute top-4 left-4 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded uppercase">Mejor para Empezar</div>
          </div>
          <div class="md:w-2/3 p-8 flex flex-col justify-center">
            <div class="flex justify-between items-start mb-4">
              <h3 class="text-2xl font-bold text-slate-900">{topStarterModel.title}</h3>
              <span class="text-xl font-bold text-blue-600">{topStarterModel.price}€</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              <strong>Para principiantes:</strong> No necesitas gastar 1000€ para grabar posavasos o cortar cartón. Esta Creality de 5W es robusta, fácil de montar y tiene un punto láser muy fino (0.06mm) que da una nitidez increíble en fotos. Ideal para aprender sin arruinarse.
            </p>
            <div class="flex gap-4 mt-auto">
              <a href={`/productos/${topStarterModel.slug}`} class="bg-slate-900 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                Leer Review Completa
              </a>
              <a href={topStarterModel.affiliateUrl} target="_blank" rel="nofollow" class="text-slate-600 hover:text-slate-900 px-6 py-3 font-medium border border-slate-300 rounded-lg flex items-center">
                Ver Precio
              </a>
            </div>
          </div>
        </div>

      </div>
    </section>

    {/* SECCIÓN 3: COMPARATIVA TÉCNICA (TABLA MANUAL OPTIMIZADA) */}
    <section class="bg-slate-900 text-white py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold mb-10 text-center">Tabla Comparativa Rápida</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="border-b border-slate-700 text-slate-400 text-sm uppercase tracking-wider">
                <th class="p-4">Característica</th>
                <th class="p-4 text-blue-400 font-bold">xTool (Ganador)</th>
                <th class="p-4 text-slate-200 font-bold">Ortur (Fiable)</th>
                <th class="p-4 text-slate-200 font-bold">Sculpfun (Económico)</th>
                <th class="p-4 text-slate-200 font-bold">Atomstack (Potencia)</th>
              </tr>
            </thead>
            <tbody class="text-slate-300 text-sm divide-y divide-slate-800">
              <tr>
                <td class="p-4 font-bold text-slate-100">Calidad de Construcción</td>
                <td class="p-4">Industrial (Cerrada)</td>
                <td class="p-4">Aluminio Rígido</td>
                <td class="p-4">Básica pero Funcional</td>
                <td class="p-4">Robusta</td>
              </tr>
              <tr>
                <td class="p-4 font-bold text-slate-100">Software</td>
                <td class="p-4">XCS (Propio) + LightBurn</td>
                <td class="p-4">LightBurn / LaserGRBL</td>
                <td class="p-4">LightBurn / LaserGRBL</td>
                <td class="p-4">LightBurn / LaserGRBL</td>
              </tr>
              <tr>
                <td class="p-4 font-bold text-slate-100">Facilidad de Uso</td>
                <td class="p-4">⭐⭐⭐⭐⭐ (Plug & Play)</td>
                <td class="p-4">⭐⭐⭐⭐</td>
                <td class="p-4">⭐⭐⭐</td>
                <td class="p-4">⭐⭐⭐</td>
              </tr>
              <tr>
                <td class="p-4 font-bold text-slate-100">Seguridad</td>
                <td class="p-4">Clase 1 (Totalmente segura)</td>
                <td class="p-4">Sensores activos</td>
                <td class="p-4">Básica (Gafas)</td>
                <td class="p-4">Media</td>
              </tr>
              <tr>
                <td class="p-4 font-bold text-slate-100">Precio Medio</td>
                <td class="p-4 text-red-400">Alto (€€€€)</td>
                <td class="p-4 text-yellow-400">Medio (€€€)</td>
                <td class="p-4 text-green-400">Bajo (€€)</td>
                <td class="p-4 text-yellow-400">Medio-Alto (€€€)</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    {/* SECCIÓN 4: GUÍA EXPERTA (TEXTO FINAL) */}
    <section class="max-w-4xl mx-auto px-4 py-20">
      <h2 class="text-3xl font-bold text-slate-900 mb-6">Consejo final antes de comprar</h2>
      <div class="prose prose-lg prose-slate text-slate-700">
        <p>
          No te obsesiones con los "Watios" de marketing. Muchas marcas chinas baratas dicen "40W" refiriéndose al consumo eléctrico, cuando el láser real es de 5W. Fíjate siempre en la <strong>Potencia Óptica de Salida</strong>.
        </p>
        <p>
          Si vas a trabajar en el salón de tu casa, compra una <strong>xTool</strong> o cualquier máquina con carcasa cerrada. El humo es tóxico y el láser rebota. Si tienes un garaje o taller ventilado, una <strong>Ortur</strong> o <strong>Sculpfun</strong> con un buen sistema de extracción casero te ahorrará mucho dinero.
        </p>
        <p>
          Y recuerda: la máquina es solo el 50%. El otro 50% eres tú aprendiendo a usar el software <strong>LightBurn</strong>. Asegúrate de que la máquina que elijas sea compatible (todas las de esta lista lo son).
        </p>
      </div>
    </section>

  </main>
</Layout>

<style>
  /* Animaciones suaves para dar sensación premium */
  @keyframes fade-in-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }
  
  @keyframes fade-in-down {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-down {
    animation: fade-in-down 0.6s ease-out forwards;
  }
</style>
