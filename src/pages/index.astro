---
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import CategoryCard from '../components/CategoryCard.astro';
import BlogCard from '../components/BlogCard.astro';
import BrandCard from '../components/BrandCard.astro';
import FaqSection from '../components/faq/FaqSection.astro';
import { 
  getPublishedProducts, 
  getPublishedArticles, 
  getBrandsWithProductCount,
  getAuthorById 
} from '../utils/dataProcessing';
import data from '../data';

// Get processed data - limit to 9 items
const publishedProducts = getPublishedProducts().slice(0, 9);
const publishedArticles = getPublishedArticles(3);
const brandsWithProductCount = getBrandsWithProductCount(3);

// Get categories with published products
const now = new Date();
const categoriesWithProducts = data.categories
  .filter(category =>
    data.products.some(product => 
      product.categories.includes(category.id) &&
      new Date(product.publishDate) <= now
    )
  )
  .slice(0, 9);

// Process articles with author data
const articlesWithAuthors = publishedArticles.map(article => {
  const author = getAuthorById(article.author);
  return {
    ...article,
    author: author ? {
      name: author.name,
      avatar: author.avatar
    } : {
      name: 'Unknown Author',
      avatar: '/images/default-avatar.jpg'
    }
  };
});

// FAQ data
const homeFaqs = {
  title: "Preguntas Frecuentes sobre Grabadores L√°ser",
  questions: [
    {
      question: "¬øQu√© es un grabador l√°ser?",
      answer: "Un grabador l√°ser es una m√°quina que utiliza tecnolog√≠a l√°ser para grabar o cortar materiales con alta precisi√≥n. Es ideal para crear dise√±os personalizados en madera, acr√≠lico, cuero y otros materiales."
    },
    {
      question: "¬øQu√© puedo hacer con un grabador l√°ser?",
      answer: "Con un grabador l√°ser puedes crear se√±al√©tica, personalizar regalos, fabricar joyer√≠a, hacer decoraci√≥n para el hogar, crear productos personalizados para vender, y mucho m√°s."
    },
    {
      question: "¬øQu√© debo considerar al comprar un grabador l√°ser?",
      answer: "Los factores principales son: potencia del l√°ser, √°rea de trabajo, materiales compatibles, software incluido, medidas de seguridad y tu presupuesto."
    }
  ]
};

// Schema data
const schema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Mi grabadora laser",
  "url": "https://migrabadoralaser.es/",
  "description": "Gu√≠a experta de grabadores l√°ser: comparativas, reviews y consejos para elegir el mejor grabador l√°ser.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://migrabadoralaser.es/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
};
---

<Layout>
  <script type="application/ld+json" set:html={JSON.stringify(schema)} />

  <!-- Hero Section -->
  <section class="relative overflow-hidden bg-[url('/imagenes/migrabadoralaser.jpg')] bg-cover bg-center">
    <div class="absolute inset-0">
      <!-- Overlay oscuro para legibilidad del texto -->
      <div class="absolute inset-0 bg-black/60"></div>
    </div>

    <div class="relative max-w-7xl mx-auto py-24 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">
          Encuentra tu <span class="text-primary-200">Grabador L√°ser</span>
        </h1>
        <p class="mt-6 max-w-2xl mx-auto text-xl text-primary-100">
          Reviews expertos, comparativas y gu√≠as para ayudarte a elegir el mejor grabador l√°ser para tus necesidades.
        </p>
        <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
          <a
            href="/comparador/"
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-primary-700 bg-white hover:bg-primary-50 transition-colors duration-300"
          >
            Comparador de grabadoras laser
          </a>
          <a
            href="/blog/"
            class="inline-flex items-center px-6 py-3 border border-white text-base font-medium rounded-full text-white hover:bg-primary-700/50 transition-colors duration-300"
          >
            Leer Blog
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
          Los Mejores Grabadores L√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Descubre nuestra selecci√≥n de los mejores grabadores l√°ser del mercado
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {publishedProducts.map((product) => (
          <ProductCard {...product} />
        ))}
      </div>
      <div class="text-center mt-12">
        <a
          href="/buscador/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver todos los grabadores l√°ser
          <svg class="ml-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Why Choose Us Section -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          La web de los amantes del grabado laser üéØ
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Tu gu√≠a experta en el mundo del grabado l√°ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-3">
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">üîç</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Reviews Detalladas</h3>
          <p class="text-gray-600">Analizamos cada grabador l√°ser a fondo para ofrecerte informaci√≥n precisa y objetiva</p>
        </div>
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">üí°</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Consejos Expertos</h3>
          <p class="text-gray-600">Te ayudamos a elegir el grabador perfecto para tus necesidades espec√≠ficas</p>
        </div>
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">üîÑ</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Actualizaci√≥n Constante</h3>
          <p class="text-gray-600">Mantenemos nuestra informaci√≥n al d√≠a con las √∫ltimas novedades del mercado</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Explora por Categor√≠as
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Encuentra el grabador l√°ser perfecto para tus necesidades
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {categoriesWithProducts.map((category) => (
          <CategoryCard {...category} />
        ))}
      </div>
      <div class="text-center mt-12">
        <a
          href="/categories/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver todas las categor√≠as
          <svg class="ml-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Beneficios del Grabado L√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Descubre las ventajas de utilizar tecnolog√≠a l√°ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2">
        <div class="bg-gray-50 rounded-2xl p-8">
          <img
            src="/imagenes/grabadora-laser.jpg"
            alt="grabadora laser"
            class="w-full h-48 object-cover rounded-xl mb-6"
          />
          <h3 class="text-xl font-bold text-gray-900 mb-4">Alta Precisi√≥n</h3>
          <p class="text-gray-600">
            Los grabadores l√°ser ofrecen una precisi√≥n incomparable, permitiendo crear dise√±os detallados y complejos con exactitud milim√©trica.
          </p>
        </div>
        <div class="bg-gray-50 rounded-2xl p-8">
          <img
            src="/imagenes/grabador-laser.jpg"
            alt="grabador laser"
            class="w-full h-48 object-cover rounded-xl mb-6"
          />
          <h3 class="text-xl font-bold text-gray-900 mb-4">Versatilidad</h3>
          <p class="text-gray-600">
            Trabaja con m√∫ltiples materiales: desde madera y acr√≠lico hasta cuero y metal, las posibilidades son infinitas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest Blog Posts -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          √öltimos Art√≠culos sobre grabado y corte l√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Mantente al d√≠a con las √∫ltimas tendencias y consejos en grabado l√°ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {articlesWithAuthors.map((article) => (
          <BlogCard {...article} />
        ))}
      </div>
    </div>
  </section>

  <!-- Application Areas -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Usos de las m√°quinas de grabado con l√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Explora las infinitas posibilidades del grabado l√°ser
        </p>
      </header>
      <div class="grid gap-6 md:grid-cols-4">
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">üéÅ</span>
          <h3 class="font-semibold text-gray-900">Regalos Personalizados</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">üè¢</span>
          <h3 class="font-semibold text-gray-900">Se√±al√©tica Comercial</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">üíç</span>
          <h3 class="font-semibold text-gray-900">Joyer√≠a</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">üè†</span>
          <h3 class="font-semibold text-gray-900">Decoraci√≥n</h3>
        </div>
      </div>
    </div>
  </section>

 <!-- Secci√≥n Conceptos Optimizada -->
  <section class="bg-white py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Convi√©rtete en un especialista en grabado l√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600 max-w-3xl mx-auto">
          Domina los <strong>conceptos b√°sicos y avanzados del grabado l√°ser</strong>. 
          Aprende paso a paso la terminolog√≠a, las t√©cnicas m√°s usadas y los fundamentos que 
          necesitas para sacar el m√°ximo rendimiento a tu m√°quina.  
          Esta secci√≥n est√° pensada tanto para principiantes como para usuarios con experiencia que quieren perfeccionar sus conocimientos.
        </p>
      </header>

      <!-- Mini grid con beneficios -->
      <div class="grid gap-8 md:grid-cols-3 mb-12">
        <div class="bg-gray-50 rounded-xl shadow p-6 text-center">
          <span class="text-4xl mb-4 block">üìò</span>
          <h3 class="text-lg font-bold text-gray-900 mb-2">Fundamentos</h3>
          <p class="text-gray-600">Descubre c√≥mo funciona un grabador l√°ser, qu√© tipos de tecnolog√≠as existen y qu√© aplicaciones tiene en la vida real.</p>
        </div>
        <div class="bg-gray-50 rounded-xl shadow p-6 text-center">
          <span class="text-4xl mb-4 block">üõ†Ô∏è</span>
          <h3 class="text-lg font-bold text-gray-900 mb-2">T√©cnicas</h3>
          <p class="text-gray-600">Aprende las principales t√©cnicas de grabado y corte con l√°ser, optimizaci√≥n de par√°metros y materiales recomendados.</p>
        </div>
        <div class="bg-gray-50 rounded-xl shadow p-6 text-center">
          <span class="text-4xl mb-4 block">üîë</span>
          <h3 class="text-lg font-bold text-gray-900 mb-2">Terminolog√≠a</h3>
          <p class="text-gray-600">Familiar√≠zate con los t√©rminos m√°s importantes del sector y entiende el lenguaje t√©cnico de forma sencilla.</p>
        </div>
      </div>

      <!-- CTA -->
      <div class="text-center">
        <a
          href="/conceptos/"
          class="inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors shadow-lg"
        >
          Explorar Conceptos del Grabado L√°ser
          <svg class="ml-3 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Comparativas y Consejos de Grabadores L√°ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Encuentra comparativas objetivas, gu√≠as de compra y consejos pr√°cticos para elegir la m√°quina ideal.
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-3">
        <div class="bg-white shadow-md rounded-xl p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-3">Top Grabadores</h3>
          <p class="text-gray-600">Descubre cu√°les son los modelos m√°s recomendados seg√∫n su relaci√≥n calidad-precio.</p>
        </div>
        <div class="bg-white shadow-md rounded-xl p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-3">Gu√≠as Pr√°cticas</h3>
          <p class="text-gray-600">Desde la instalaci√≥n hasta el mantenimiento, te damos claves √∫tiles paso a paso.</p>
        </div>
        <div class="bg-white shadow-md rounded-xl p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-3">Consejos de Expertos</h3>
          <p class="text-gray-600">Analizamos qu√© caracter√≠sticas importan realmente en tu pr√≥ximo grabador l√°ser.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-12 items-center">
      <div>
        <h2 class="text-3xl font-extrabold text-gray-900 mb-6">
          Innovaci√≥n y Futuro del Grabado L√°ser
        </h2>
        <p class="text-xl text-gray-600 mb-4">
          La tecnolog√≠a l√°ser evoluciona constantemente, ofreciendo cada vez m√°s potencia, precisi√≥n y
          posibilidades creativas. Explora c√≥mo los avances est√°n transformando el dise√±o, la fabricaci√≥n
          y la personalizaci√≥n de productos.
        </p>
        <p class="text-gray-600">
          Desde peque√±os talleres hasta grandes industrias, el grabado l√°ser se ha consolidado como una herramienta imprescindible en el mundo moderno.
        </p>
      </div>
      <div>
        <img
          src="/imagenes/grabado-laser.jpg"
          alt="Futuro del grabado l√°ser"
          class="rounded-xl shadow-lg w-full h-auto object-cover"
        />
      </div>
    </div>
  </section>


  <!-- FAQs Section -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <FaqSection {...homeFaqs} />
      <div class="text-center mt-8">
        <a
          href="/faqs/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver Todas las Preguntas Frecuentes
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-primary-600">
    <div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-3xl font-extrabold text-white mb-4">
          ¬øListo para empezar con el grabado l√°ser?
        </h2>
        <p class="text-xl text-primary-100 mb-8">
          Descubre nuestras gu√≠as y encuentra el grabador l√°ser perfecto para ti
        </p>
        <div class="flex justify-center gap-4">
          <a
            href="/categories/"
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-primary-700 bg-white hover:bg-primary-50 transition-colors"
          >
            Explorar Grabadores
          </a>
          <a
            href="/blog/"
            class="inline-flex items-center px-6 py-3 border border-white text-base font-medium rounded-full text-white hover:bg-primary-700/50 transition-colors"
          >
            Leer Gu√≠as
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>
