---
import Layout from '../../layouts/Layout.astro';
import AuthorCard from '../../components/AuthorCard.astro';
import data from '../../data';

// Get article count for each author
const now = new Date();
const authorArticleCounts = data.authors.map(author => ({
  ...author,
  articleCount: data.articles.filter(
    article =>
      article.author === author.id &&
      new Date(article.publishDate) <= now
  ).length
}));
---

<Layout
  title="Our Authors"
  description="Meet our expert writers and contributors in the field of laser engraving and cutting"
>
  <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <!-- Authors Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-extrabold text-gray-900 mb-4">Our Authors</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        Meet our team of experts who share their knowledge and experience in laser engraving and cutting
      </p>
    </div>

    <!-- Authors Grid -->
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {authorArticleCounts.map((author) => (
        <AuthorCard {...author} />
      ))}
    </div>
  </div>
</Layout>