---
import Layout from '../../layouts/Layout.astro';
import AuthorCard from '../../components/AuthorCard.astro';
import data from '../../data/blog.json';

// Get article count for each author
const now = new Date();
const authors = data.authors || [];
const authorArticleCounts = authors.map(author => ({
  ...author,
  articleCount: (data.articles || []).filter(
    article =>
      article.author === author.id &&
      new Date(article.publishDate) <= now
  ).length
}));
---

<Layout
  title="Nuestros autores"
  description="Conoce a nuestros redactores y colaboradores expertos en el campo del grabado y corte por láser"
>
  <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <!-- Authors Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-extrabold text-gray-900 mb-4">Autores de Migrabadoralaser</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        Conoce a nuestros redactores y colaboradores expertos en el campo del grabado y corte por láser
      </p>
    </div>

    <!-- Authors Grid -->
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {authorArticleCounts.map((author) => (
        <AuthorCard {...author} />
      ))}
    </div>
  </div>
</Layout>